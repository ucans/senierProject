<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Handwritten Math Expression Recognition</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<script>
    function showloading() {
        image = document.getElementById('loading_image');
        image.style.display = 'inline'
    }

    function hideLoader() {
        $('#loading').hide();
    }

    $(window).ready(hideLoader);

    setTimeout(hideLoader, 20 * 1000);
</script>

<body>
    <div id="loading"></div>
    <div class="starting-page">

        <h1
            style="color: black; font-weight: bold; font-family: 'Comic Sans MS', cursive, sans-serif; margin: auto;width: 80%; text-align: center; margin-top: 180px;  text-transfor∂m: uppercase">
            Handwritten Math <br>Expression Recognition</h1>

        <form action="/upload" method="post" enctype="multipart/form-data"
            style="margin-top: 30px; width: 80%; text-align: center; margin: auto;" onsubmit="showloading()">
            </br>
            <span class="btn btn-default btn-file">
                파일 선택 <input type="file" name="image">
            </span><br><br>
            <input type="submit" value="업로드" class="btn btn-primary">
        </form>
        <br>

        <div style="text-align: center">
            <img id="loading_image" style="display: none" src="{{ url_for('static', filename='loading.gif')}}">
        </div>
        <script>
            $('#canvas').mousedown(function (e) {
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;

                paint = true;
                addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);
                redraw();
            });

            $('#canvas').mousemove(function (e) {
                if (paint) {
                    addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);
                    redraw();
                }
            });

            $('#canvas').mouseup(function (e) {
                paint = false;
            });

            $('#canvas').mouseleave(function (e) {
                paint = false;
            });

            var clickX = new Array();
            var clickY = new Array();
            var clickDrag = new Array();
            var paint;

            function addClick(x, y, dragging) {
                clickX.push(x);
                clickY.push(y);
                clickDrag.push(dragging);
            }
        </script>
        </header>

</body>

</html>